{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst PIXABAY_URL = 'https://pixabay.com/api/';\nconst API_KEY = import.meta.env.VITE_API_KEY;\nconst ligthbox = new SimpleLightbox('.gallery a');\n\niziToast.settings({\n  timeout: 10000,\n  resetOnHover: true,\n  icon: null,\n  position: 'topRight',\n  close: false,\n  closeOnClick: true,\n  closeOnEscape: true,\n});\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = event.target.search.value;\n  gallery.innerHTML = null;\n  loader.style.display = 'inline-block';\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  fetch(`${PIXABAY_URL}?${searchParams}`)\n    .then(response => response.json())\n    .then(images => {\n      if (images.hits.length == 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n        });\n        return;\n      }\n\n      gallery.append(...images.hits.map(image => createGalleryItem(image)));\n      ligthbox.refresh();\n    })\n    .catch(error => {\n      console.error(error);\n    })\n    .finally(() => (loader.style.display = 'none'));\n});\n\nfunction createGalleryItem(image) {\n  const liEl = document.createElement('li');\n  liEl.className = 'gallery-item';\n  const linkEl = document.createElement('a');\n  linkEl.className = 'gallery-link';\n  linkEl.href = image.largeImageURL;\n  liEl.appendChild(linkEl);\n  const imEl = document.createElement('img');\n  imEl.className = 'gallery-image';\n  imEl.src = image.webformatURL;\n  imEl.title = image.tags;\n  imEl.dataset.source = image.largeImageURL;\n  const divEl = document.createElement('div');\n  divEl.className = 'tags';\n\n  const table = generateTable({\n    Likes: image.likes,\n    Views: image.views,\n    Comments: image.comments,\n    Downloads: image.downloads,\n  });\n\n  linkEl.appendChild(imEl);\n  divEl.appendChild(table);\n  linkEl.appendChild(divEl);\n  return liEl;\n}\n\nfunction generateTable(obj) {\n  // creates a <table> element and a <tbody> element\n  const tbl = document.createElement('table');\n  const tblBody = document.createElement('tbody');\n\n  // creates a table row\n  const headerRow = document.createElement('tr');\n  const valuesRow = document.createElement('tr');\n\n  Object.keys(obj).forEach(key => {\n    const cell1 = document.createElement('td');\n    const cellText1 = document.createTextNode(`${key}`);\n    cell1.appendChild(cellText1);\n    headerRow.appendChild(cell1);\n    const cell2 = document.createElement('td');\n    const cellText2 = document.createTextNode(`${obj[key]}`);\n    cell2.appendChild(cellText2);\n    valuesRow.appendChild(cell2);\n  });\n\n  // add the row to the end of the table body\n  tblBody.append(headerRow, valuesRow);\n\n  // put the <tbody> in the <table>\n  tbl.appendChild(tblBody);\n  // appends <table> into <body>\n  document.body.appendChild(tbl);\n  // sets the border attribute of tbl to '2'\n  tbl.setAttribute('border', '0');\n\n  return tbl;\n}\n"],"names":["form","gallery","loader","PIXABAY_URL","API_KEY","ligthbox","SimpleLightbox","iziToast","event","query","searchParams","response","images","image","createGalleryItem","error","liEl","linkEl","imEl","divEl","table","generateTable","obj","tbl","tblBody","headerRow","valuesRow","key","cell1","cellText1","cell2","cellText2"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,2BACdC,EAAU,CAAA,EAAgB,aAC1BC,EAAW,IAAIC,EAAe,YAAY,EAEhDC,EAAS,SAAS,CAChB,QAAS,IACT,aAAc,GACd,KAAM,KACN,SAAU,WACV,MAAO,GACP,aAAc,GACd,cAAe,EACjB,CAAC,EAEDP,EAAK,iBAAiB,SAAUQ,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,OAAO,MAClCP,EAAQ,UAAY,KACpBC,EAAO,MAAM,QAAU,eACvB,MAAMQ,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,MAAM,GAAGN,KAAeO,GAAc,EACnC,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAU,CACd,GAAIA,EAAO,KAAK,QAAU,EAAG,CAC3BL,EAAS,MAAM,CACb,QACE,2EACZ,CAAS,EACD,MACD,CAEDN,EAAQ,OAAO,GAAGW,EAAO,KAAK,IAAIC,GAASC,EAAkBD,CAAK,CAAC,CAAC,EACpER,EAAS,QAAO,CACtB,CAAK,EACA,MAAMU,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,EACA,QAAQ,IAAOb,EAAO,MAAM,QAAU,MAAO,CAClD,CAAC,EAED,SAASY,EAAkBD,EAAO,CAChC,MAAMG,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,eACjB,MAAMC,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,UAAY,eACnBA,EAAO,KAAOJ,EAAM,cACpBG,EAAK,YAAYC,CAAM,EACvB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,gBACjBA,EAAK,IAAML,EAAM,aACjBK,EAAK,MAAQL,EAAM,KACnBK,EAAK,QAAQ,OAASL,EAAM,cAC5B,MAAMM,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,OAElB,MAAMC,EAAQC,EAAc,CAC1B,MAAOR,EAAM,MACb,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,SACrB,CAAG,EAED,OAAAI,EAAO,YAAYC,CAAI,EACvBC,EAAM,YAAYC,CAAK,EACvBH,EAAO,YAAYE,CAAK,EACjBH,CACT,CAEA,SAASK,EAAcC,EAAK,CAE1B,MAAMC,EAAM,SAAS,cAAc,OAAO,EACpCC,EAAU,SAAS,cAAc,OAAO,EAGxCC,EAAY,SAAS,cAAc,IAAI,EACvCC,EAAY,SAAS,cAAc,IAAI,EAE7C,cAAO,KAAKJ,CAAG,EAAE,QAAQK,GAAO,CAC9B,MAAMC,EAAQ,SAAS,cAAc,IAAI,EACnCC,EAAY,SAAS,eAAe,GAAGF,GAAK,EAClDC,EAAM,YAAYC,CAAS,EAC3BJ,EAAU,YAAYG,CAAK,EAC3B,MAAME,EAAQ,SAAS,cAAc,IAAI,EACnCC,EAAY,SAAS,eAAe,GAAGT,EAAIK,IAAM,EACvDG,EAAM,YAAYC,CAAS,EAC3BL,EAAU,YAAYI,CAAK,CAC/B,CAAG,EAGDN,EAAQ,OAAOC,EAAWC,CAAS,EAGnCH,EAAI,YAAYC,CAAO,EAEvB,SAAS,KAAK,YAAYD,CAAG,EAE7BA,EAAI,aAAa,SAAU,GAAG,EAEvBA,CACT"}