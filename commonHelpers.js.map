{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst PIXABAY_URL = 'https://pixabay.com/api/';\nconst API_KEY = import.meta.env.VITE_API_KEY;\nconst ligthbox = new SimpleLightbox('.gallery a');\n\niziToast.settings({\n  timeout: 10000,\n  resetOnHover: true,\n  icon: null,\n  position: 'topRight',\n  close: false,\n  closeOnClick: true,\n  closeOnEscape: true,\n});\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = event.target.search.value;\n  gallery.innerHTML = null;\n  loader.style.display = 'flex';\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  fetch(`${PIXABAY_URL}?${searchParams}`)\n    .then(response => response.json())\n    .then(images => {\n      if (images.hits.length == 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n        });\n        return;\n      }\n      gallery.append(...images.hits.map(image => createGalleryItem(image)));\n      ligthbox.refresh();\n    })\n    .catch(error => {\n      console.error(error);\n    })\n    .finally(() => (loader.style.display = 'none'));\n});\n\nfunction createGalleryItem(image) {\n  const liEl = document.createElement('li');\n  liEl.className = 'gallery-item';\n  const linkEl = document.createElement('a');\n  linkEl.className = 'gallery-link';\n  linkEl.href = image.largeImageURL;\n  liEl.appendChild(linkEl);\n  const imEl = document.createElement('img');\n  imEl.className = 'gallery-image';\n  imEl.src = image.webformatURL;\n  imEl.title = image.tags;\n  imEl.dataset.source = image.largeImageURL;\n  const ulEl = document.createElement('ul');\n  ulEl.className = 'tags';\n\n  const lis = generateTags({\n    Likes: image.likes,\n    Views: image.views,\n    Comments: image.comments,\n    Downloads: image.downloads,\n  });\n\n  linkEl.appendChild(imEl);\n  ulEl.append(...lis);\n  linkEl.appendChild(ulEl);\n  return liEl;\n}\n\nfunction generateTags(obj) {\n  const lis = [];\n  Object.keys(obj).forEach(key => {\n    const li = document.createElement('li');\n    li.textContent = key;\n    const p = document.createElement('p');\n    p.textContent = obj[key];\n    li.appendChild(p);\n    lis.push(li);\n  });\n\n  return lis;\n}\n"],"names":["form","gallery","loader","PIXABAY_URL","API_KEY","ligthbox","SimpleLightbox","iziToast","event","query","searchParams","response","images","image","createGalleryItem","error","liEl","linkEl","imEl","ulEl","lis","generateTags","obj","key","li","p"],"mappings":"wvBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,2BACdC,EAAU,qCACVC,EAAW,IAAIC,EAAe,YAAY,EAEhDC,EAAS,SAAS,CAChB,QAAS,IACT,aAAc,GACd,KAAM,KACN,SAAU,WACV,MAAO,GACP,aAAc,GACd,cAAe,EACjB,CAAC,EAEDP,EAAK,iBAAiB,SAAUQ,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,OAAO,MAClCP,EAAQ,UAAY,KACpBC,EAAO,MAAM,QAAU,OACvB,MAAMQ,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,MAAM,GAAGN,KAAeO,GAAc,EACnC,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAU,CACd,GAAIA,EAAO,KAAK,QAAU,EAAG,CAC3BL,EAAS,MAAM,CACb,QACE,2EACZ,CAAS,EACD,MACD,CACDN,EAAQ,OAAO,GAAGW,EAAO,KAAK,IAAIC,GAASC,EAAkBD,CAAK,CAAC,CAAC,EACpER,EAAS,QAAO,CACtB,CAAK,EACA,MAAMU,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,EACA,QAAQ,IAAOb,EAAO,MAAM,QAAU,MAAO,CAClD,CAAC,EAED,SAASY,EAAkBD,EAAO,CAChC,MAAMG,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,eACjB,MAAMC,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,UAAY,eACnBA,EAAO,KAAOJ,EAAM,cACpBG,EAAK,YAAYC,CAAM,EACvB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,gBACjBA,EAAK,IAAML,EAAM,aACjBK,EAAK,MAAQL,EAAM,KACnBK,EAAK,QAAQ,OAASL,EAAM,cAC5B,MAAMM,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,OAEjB,MAAMC,EAAMC,EAAa,CACvB,MAAOR,EAAM,MACb,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,SACrB,CAAG,EAED,OAAAI,EAAO,YAAYC,CAAI,EACvBC,EAAK,OAAO,GAAGC,CAAG,EAClBH,EAAO,YAAYE,CAAI,EAChBH,CACT,CAEA,SAASK,EAAaC,EAAK,CACzB,MAAMF,EAAM,CAAA,EACZ,cAAO,KAAKE,CAAG,EAAE,QAAQC,GAAO,CAC9B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAcD,EACjB,MAAME,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,YAAcH,EAAIC,GACpBC,EAAG,YAAYC,CAAC,EAChBL,EAAI,KAAKI,CAAE,CACf,CAAG,EAEMJ,CACT"}